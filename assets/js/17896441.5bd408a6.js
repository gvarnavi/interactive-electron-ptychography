"use strict";(self.webpackChunkinteractive_ptycho=self.webpackChunkinteractive_ptycho||[]).push([[7918],{53475:(e,n,t)=>{t.r(n),t.d(n,{default:()=>x});var o=t(67294),i=t(72389),a=t(81170),s=t(46110),d=t(91262),c=t(92949),l=t(45081),r=t(85893);const u={enableBasicAutocompletion:!1,enableLiveAutocompletion:!1,highlightActiveLine:!1,showPrintMargin:!1,showGutter:!1};function m(e,n,t){let o=e.commands.byName[n];o.bindKeyOriginal||(o.bindKeyOriginal=o.bindKey),o.bindKey=t?o.bindKeyOriginal:null,e.commands.addCommand(o)}const h=e=>{e.renderer.setScrollMargin(10,10,0,0),e.renderer.setPadding(16),e.moveCursorTo(0,0),m(e,"indent",!1),m(e,"outdent",!1),e.commands.on("afterExec",(n=>{"disable-indent"!==n.command.name&&(m(e,"indent",!0),m(e,"outdent",!0))})),e.on("click",(n=>{m(e,"indent",!0),m(e,"outdent",!0)})),e.on("blur",(n=>{m(e,"indent",!1),m(e,"outdent",!1)})),e.commands.addCommand({name:"disable-indent",bindKey:{win:"esc",mac:"esc"},exec:e=>{m(e,"indent",!1),m(e,"outdent",!1)}})},f=()=>!!navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(android)/i)||navigator.userAgent.includes("Mac")&&"ontouchend"in document;function p(e){let n;if("metastring"in e){n={official:[],micropip:e.metastring.match(/(?:"[^"]*"|^[^"]*$)/)[0].replace(/"/g,"").split(" ")}}const[a,s]=(0,o.useState)(e.code.trimEnd()),[m,p]=(0,o.useState)(!1),[g,b]=(0,o.useState)(!1),[x,y]=(0,o.useState)(!1);(0,o.useEffect)((()=>{s(e.code.trimEnd()),p(!1)}),[e.code]);const{runPython:j,stdout:C,stderr:v,isLoading:k,isRunning:w,interruptExecution:N}=(0,l.usePython)({packages:n}),{colorMode:S}=(0,c.useColorMode)(),A=(0,i.default)();let P=null;function E(){p(!1),s(e.code.trimEnd())}function L(){return p(!0),j(a)}function B(){p(!1),N()}A&&(P=t(74981).default,t(4007),t(22777),t(33783),t(82679));const K=(0,r.jsx)("pre",{style:{margin:0,padding:"0.55rem"},children:a});return(0,r.jsx)(d.default,{fallback:K,children:()=>(0,r.jsxs)("div",{className:"code-editor",onMouseLeave:()=>{b(!1),y(!1)},children:[(0,r.jsxs)("div",{className:"code-editor-window",style:m?{borderRadius:".25em .25em 0 0"}:{},children:[(0,r.jsx)(P,{value:a,mode:"python",name:"CodeBlock",fontSize:"var(--ifm-code-font-size)",theme:"dark"===S?"idle_fingers":"textmate",onChange:(e,n)=>s(e),width:"100%",maxLines:1/0,style:{backgroundColor:"rgba(0, 0, 0, 0)"},onLoad:h,editorProps:{$blockScrolling:!0},setOptions:u}),(0,r.jsx)("div",{className:"button-container",style:e.showButtons||f()||g||x?{opacity:100}:{},children:k?(0,r.jsx)("span",{children:"Loading..."}):(0,r.jsxs)(r.Fragment,{children:[w?(0,r.jsx)("button",{className:"icon-button",disabled:k||!w,onClick:B,onFocus:()=>b(!0),onBlur:()=>b(!1),"aria-label":"Stop Code",title:"Stop Code",children:(0,r.jsx)("span",{className:"icon lsf-icon",title:"stop"})}):(0,r.jsx)("button",{className:"icon-button",disabled:k||w,onClick:L,onFocus:()=>b(!0),onBlur:()=>b(!1),"aria-label":"Run Code",title:"Run Code",children:(0,r.jsx)("span",{className:"icon lsf-icon",title:"play"})}),(0,r.jsx)("button",{className:"icon-button",onClick:E,onFocus:()=>y(!0),onBlur:()=>y(!1),"aria-label":"Reset Code Window",title:"Reset Code Window",children:(0,r.jsx)("span",{className:"icon lsf-icon",title:"refresh"})})]})})]}),m&&(0,r.jsxs)("pre",{className:"output-window",children:[(0,r.jsx)("span",{children:C}),(0,r.jsx)("span",{style:{color:"var(--text-code-error)"},children:v})]})]})})}var g=t(23907),b=t(38985);function x(e){let{children:n,...t}=e;const d=function(e){return o.Children.toArray(e).some((e=>(0,o.isValidElement)(e)))?e:Array.isArray(e)?e.join(""):e}(n);if("language-python"===t.className)return(0,r.jsx)(p,{code:d,...t});if("language-jsx"===t.className&&t.live)return(0,r.jsx)(g.default,{scope:b.default,...t,children:d});{const e=(0,i.default)(),n="string"==typeof d?s.default:a.default;return(0,r.jsx)(n,{...t,children:d},String(e))}}}}]);